{"version":3,"file":"calendar.js","names":["AppCalendar","calendar","eventName","eventDescription","eventLocation","startDatepicker","startFlatpickr","endDatepicker","endFlatpickr","startTimepicker","startTimeFlatpickr","endTimepicker","endTimeFlatpickr","modal","modalTitle","form","validator","addButton","submitButton","cancelButton","closeButton","viewEventName","viewAllDay","viewEventDescription","viewEventLocation","viewStartDate","viewEndDate","viewModal","viewEditButton","viewDeleteButton","data","id","startDate","endDate","allDay","handleNewEvent","innerText","show","datepickerWrappers","querySelectorAll","allDayToggle","querySelector","addEventListener","e","target","checked","forEach","dw","classList","add","setDate","remove","populateForm","preventDefault","validate","then","status","console","log","setAttribute","disabled","setTimeout","removeAttribute","Swal","fire","text","icon","buttonsStyling","confirmButtonText","customClass","confirmButton","result","isConfirmed","hide","allDayEvent","selectedDates","length","startDateTime","moment","format","endDateTime","addEvent","uid","title","value","description","location","start","end","render","reset","handleViewEvent","eventNameMod","startDateMod","endDateMod","handleEditButton","getEventById","handleEditEvent","formatArgs","res","startStr","endStr","Date","now","toString","Math","floor","random","init","element","document","getElementById","bootstrap","Modal","viewElement","calendarEl","todayDate","YM","YESTERDAY","TODAY","TOMORROW","startOf","clone","subtract","FullCalendar","Calendar","headerToolbar","left","center","right","initialDate","navLinks","selectable","selectMirror","select","arg","eventClick","event","extendedProps","editable","dayMaxEvents","events","className","datesSet","FormValidation","formValidation","fields","calendar_event_name","validators","notEmpty","message","calendar_event_start_date","calendar_event_end_date","plugins","trigger","Trigger","Bootstrap5","rowSelector","eleInvalidClass","eleValidClass","flatpickr","enableTime","dateFormat","noCalendar","showCancelButton","cancelButtonText","dismiss","resetForm","resetFormValidator","Util","onDOMContentLoaded"],"sources":["my/apps/calendar/calendar.js"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\n// Определение класса\r\nvar AppCalendar = function () {\r\n    // Shared variables\r\n    // Calendar variables\r\n    var calendar;\r\n    var data = {\r\n        id: '',\r\n        eventName: '',\r\n        eventDescription: '',\r\n        eventLocation: '',\r\n        startDate: '',\r\n        endDate: '',\r\n        allDay: false\r\n    };\r\n\r\n    // Add event variables\r\n    var eventName;\r\n    var eventDescription;\r\n    var eventLocation;\r\n    var startDatepicker;\r\n    var startFlatpickr;\r\n    var endDatepicker;\r\n    var endFlatpickr;\r\n    var startTimepicker;\r\n    var startTimeFlatpickr;\r\n    var endTimepicker\r\n    var endTimeFlatpickr;\r\n    var modal;\r\n    var modalTitle;\r\n    var form;\r\n    var validator;\r\n    var addButton;\r\n    var submitButton;\r\n    var cancelButton;\r\n    var closeButton;\r\n\r\n    // View event variables\r\n    var viewEventName;\r\n    var viewAllDay;\r\n    var viewEventDescription;\r\n    var viewEventLocation;\r\n    var viewStartDate;\r\n    var viewEndDate;\r\n    var viewModal;\r\n    var viewEditButton;\r\n    var viewDeleteButton;\r\n\r\n\r\n    // Приватные методы\r\n    var initCalendarApp = function () {\r\n        // Define variables\r\n        var calendarEl = document.getElementById('calendar_app');\r\n        var todayDate = moment().startOf('day');\r\n        var YM = todayDate.format('YYYY-MM');\r\n        var YESTERDAY = todayDate.clone().subtract(1, 'day').format('YYYY-MM-DD');\r\n        var TODAY = todayDate.format('YYYY-MM-DD');\r\n        var TOMORROW = todayDate.clone().add(1, 'day').format('YYYY-MM-DD');\r\n\r\n        // Init calendar --- more info: https://fullcalendar.io/docs/initialize-globals\r\n        calendar = new FullCalendar.Calendar(calendarEl, {\r\n            //locale: 'es', // Set local --- more info: https://fullcalendar.io/docs/locale\r\n            headerToolbar: {\r\n                left: 'prev,next today',\r\n                center: 'title',\r\n                right: 'dayGridMonth,timeGridWeek,timeGridDay'\r\n            },\r\n            initialDate: TODAY,\r\n            navLinks: true, // can click day/week names to navigate views\r\n            selectable: true,\r\n            selectMirror: true,\r\n\r\n            // Select dates action --- more info: https://fullcalendar.io/docs/select-callback\r\n            select: function (arg) {\r\n                formatArgs(arg);\r\n                handleNewEvent();\r\n            },\r\n\r\n            // Click event --- more info: https://fullcalendar.io/docs/eventClick\r\n            eventClick: function (arg) {\r\n                formatArgs({\r\n                    id: arg.event.id,\r\n                    title: arg.event.title,\r\n                    description: arg.event.extendedProps.description,\r\n                    location: arg.event.extendedProps.location,\r\n                    startStr: arg.event.startStr,\r\n                    endStr: arg.event.endStr,\r\n                    allDay: arg.event.allDay\r\n                });\r\n                \r\n                handleViewEvent();\r\n            },\r\n\r\n            editable: true,\r\n            dayMaxEvents: true, // allow \"more\" link when too many events\r\n            events: [\r\n                {\r\n                    id: uid(),\r\n                    title: 'All Day Event',\r\n                    start: YM + '-01',\r\n                    end: YM + '-02',\r\n                    description: 'Toto lorem ipsum dolor sit incid idunt ut',\r\n                    className: \"fc-event-danger fc-event-solid-warning\",\r\n                    location: 'Federation Square'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Reporting',\r\n                    start: YM + '-14T13:30:00',\r\n                    description: 'Lorem ipsum dolor incid idunt ut labore',\r\n                    end: YM + '-14T14:30:00',\r\n                    className: \"fc-event-success\",\r\n                    location: 'Meeting Room 7.03'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Company Trip',\r\n                    start: YM + '-02',\r\n                    description: 'Lorem ipsum dolor sit tempor incid',\r\n                    end: YM + '-03',\r\n                    className: \"fc-event-primary\",\r\n                    location: 'Seoul, Korea'\r\n\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'ICT Expo 2021 - Product Release',\r\n                    start: YM + '-03',\r\n                    description: 'Lorem ipsum dolor sit tempor inci',\r\n                    end: YM + '-05',\r\n                    className: \"fc-event-light fc-event-solid-primary\",\r\n                    location: 'Melbourne Exhibition Hall'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Dinner',\r\n                    start: YM + '-12',\r\n                    description: 'Lorem ipsum dolor sit amet, conse ctetur',\r\n                    end: YM + '-13',\r\n                    location: 'Squire\\'s Loft'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Repeating Event',\r\n                    start: YM + '-09T16:00:00',\r\n                    end: YM + '-09T17:00:00',\r\n                    description: 'Lorem ipsum dolor sit ncididunt ut labore',\r\n                    className: \"fc-event-danger\",\r\n                    location: 'General Area'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Repeating Event',\r\n                    description: 'Lorem ipsum dolor sit amet, labore',\r\n                    start: YM + '-16T16:00:00',\r\n                    end: YM + '-16T17:00:00',\r\n                    location: 'General Area'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Conference',\r\n                    start: YESTERDAY,\r\n                    end: TOMORROW,\r\n                    description: 'Lorem ipsum dolor eius mod tempor labore',\r\n                    className: \"fc-event-primary\",\r\n                    location: 'Conference Hall A'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Meeting',\r\n                    start: TODAY + 'T10:30:00',\r\n                    end: TODAY + 'T12:30:00',\r\n                    description: 'Lorem ipsum dolor eiu idunt ut labore',\r\n                    location: 'Meeting Room 11.06'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Lunch',\r\n                    start: TODAY + 'T12:00:00',\r\n                    end: TODAY + 'T14:00:00',\r\n                    className: \"fc-event-info\",\r\n                    description: 'Lorem ipsum dolor sit amet, ut labore',\r\n                    location: 'Cafeteria'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Meeting',\r\n                    start: TODAY + 'T14:30:00',\r\n                    end: TODAY + 'T15:30:00',\r\n                    className: \"fc-event-warning\",\r\n                    description: 'Lorem ipsum conse ctetur adipi scing',\r\n                    location: 'Meeting Room 11.10'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Happy Hour',\r\n                    start: TODAY + 'T17:30:00',\r\n                    end: TODAY + 'T21:30:00',\r\n                    className: \"fc-event-info\",\r\n                    description: 'Lorem ipsum dolor sit amet, conse ctetur',\r\n                    location: 'The English Pub'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Dinner',\r\n                    start: TOMORROW + 'T18:00:00',\r\n                    end: TOMORROW + 'T21:00:00',\r\n                    className: \"fc-event-solid-danger fc-event-light\",\r\n                    description: 'Lorem ipsum dolor sit ctetur adipi scing',\r\n                    location: 'New York Steakhouse'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Birthday Party',\r\n                    start: TOMORROW + 'T12:00:00',\r\n                    end: TOMORROW + 'T14:00:00',\r\n                    className: \"fc-event-primary\",\r\n                    description: 'Lorem ipsum dolor sit amet, scing',\r\n                    location: 'The English Pub'\r\n                },\r\n                {\r\n                    id: uid(),\r\n                    title: 'Site visit',\r\n                    start: YM + '-28',\r\n                    end: YM + '-29',\r\n                    className: \"fc-event-solid-info fc-event-light\",\r\n                    description: 'Lorem ipsum dolor sit amet, labore',\r\n                    location: '271, Spring Street'\r\n                }\r\n            ],\r\n\r\n            // Handle changing calendar views --- more info: https://fullcalendar.io/docs/datesSet\r\n            datesSet: function(){\r\n                // do some stuff\r\n            }\r\n        });\r\n\r\n        calendar.render();\r\n    }\r\n\r\n    // Init validator\r\n    const initValidator = () => {\r\n        // Init form validation rules. For more info check the FormValidation plugin's official documentation:https://formvalidation.io/\r\n        validator = FormValidation.formValidation(\r\n            form,\r\n            {\r\n                fields: {\r\n                    'calendar_event_name': {\r\n                        validators: {\r\n                            notEmpty: {\r\n                                message: 'Event name is required'\r\n                            }\r\n                        }\r\n                    },\r\n                    'calendar_event_start_date': {\r\n                        validators: {\r\n                            notEmpty: {\r\n                                message: 'Start date is required'\r\n                            }\r\n                        }\r\n                    },\r\n                    'calendar_event_end_date': {\r\n                        validators: {\r\n                            notEmpty: {\r\n                                message: 'End date is required'\r\n                            }\r\n                        }\r\n                    }\r\n                },\r\n\r\n                plugins: {\r\n                    trigger: new FormValidation.plugins.Trigger(),\r\n                    bootstrap: new FormValidation.plugins.Bootstrap5({\r\n                        rowSelector: '.fv-row',\r\n                        eleInvalidClass: '',\r\n                        eleValidClass: ''\r\n                    })\r\n                }\r\n            }\r\n        );\r\n    }\r\n\r\n    // Initialize datepickers --- more info: https://flatpickr.js.org/\r\n    const initDatepickers = () => {\r\n        startFlatpickr = flatpickr(startDatepicker, {\r\n            enableTime: false,\r\n            dateFormat: \"Y-m-d\",\r\n        });\r\n\r\n        endFlatpickr = flatpickr(endDatepicker, {\r\n            enableTime: false,\r\n            dateFormat: \"Y-m-d\",\r\n        });\r\n\r\n        startTimeFlatpickr = flatpickr(startTimepicker, {\r\n            enableTime: true,\r\n            noCalendar: true,\r\n            dateFormat: \"H:i\",\r\n        });\r\n\r\n        endTimeFlatpickr = flatpickr(endTimepicker, {\r\n            enableTime: true,\r\n            noCalendar: true,\r\n            dateFormat: \"H:i\",\r\n        });\r\n    }\r\n\r\n    // Handle add button\r\n    const handleAddButton = () => {\r\n        addButton.addEventListener('click', e => {\r\n            // Reset form data\r\n            data = {\r\n                id: '',\r\n                eventName: '',\r\n                eventDescription: '',\r\n                startDate: new Date(),\r\n                endDate: new Date(),\r\n                allDay: false\r\n            };\r\n            handleNewEvent();\r\n        });\r\n    }\r\n\r\n    // Handle add new event\r\n    const handleNewEvent = () => {\r\n        // Update modal title\r\n        modalTitle.innerText = \"Add a New Event\";\r\n\r\n        modal.show();\r\n\r\n        // Select datepicker wrapper elements\r\n        const datepickerWrappers = form.querySelectorAll('[data-calendar=\"datepicker\"]');\r\n\r\n        // Handle all day toggle\r\n        const allDayToggle = form.querySelector('#calendar_datepicker_allday');\r\n        allDayToggle.addEventListener('click', e => {\r\n            if (e.target.checked) {\r\n                datepickerWrappers.forEach(dw => {\r\n                    dw.classList.add('d-none');\r\n                });\r\n            } else {\r\n                endFlatpickr.setDate(data.startDate, true, 'Y-m-d');\r\n                datepickerWrappers.forEach(dw => {\r\n                    dw.classList.remove('d-none');\r\n                });\r\n            }\r\n        });\r\n\r\n        populateForm(data);\r\n\r\n        // Handle submit form\r\n        submitButton.addEventListener('click', function (e) {\r\n            // Prevent default button action\r\n            e.preventDefault();\r\n\r\n            // Validate form before submit\r\n            if (validator) {\r\n                validator.validate().then(function (status) {\r\n                    console.log('validated!');\r\n\r\n                    if (status == 'Valid') {\r\n                        // Show loading indication\r\n                        submitButton.setAttribute('data-indicator', 'on');\r\n\r\n                        // Disable submit button whilst loading\r\n                        submitButton.disabled = true;\r\n\r\n                        // Simulate form submission\r\n                        setTimeout(function () {\r\n                            // Simulate form submission\r\n                            submitButton.removeAttribute('data-indicator');\r\n\r\n                            // Show popup confirmation \r\n                            Swal.fire({\r\n                                text: \"New event added to calendar!\",\r\n                                icon: \"success\",\r\n                                buttonsStyling: false,\r\n                                confirmButtonText: \"Ok, got it!\",\r\n                                customClass: {\r\n                                    confirmButton: \"btn btn-primary\"\r\n                                }\r\n                            }).then(function (result) {\r\n                                if (result.isConfirmed) {\r\n                                    modal.hide();\r\n\r\n                                    // Enable submit button after loading\r\n                                    submitButton.disabled = false;\r\n\r\n                                    // Detect if is all day event\r\n                                    let allDayEvent = false;\r\n                                    if (allDayToggle.checked) { allDayEvent = true; }\r\n                                    if (startTimeFlatpickr.selectedDates.length === 0) { allDayEvent = true; }\r\n\r\n                                    // Merge date & time\r\n                                    var startDateTime = moment(startFlatpickr.selectedDates[0]).format();\r\n                                    var endDateTime = moment(endFlatpickr.selectedDates[endFlatpickr.selectedDates.length - 1]).format();\r\n                                    if (!allDayEvent) {\r\n                                        const startDate = moment(startFlatpickr.selectedDates[0]).format('YYYY-MM-DD');\r\n                                        const endDate = startDate;\r\n                                        const startTime = moment(startTimeFlatpickr.selectedDates[0]).format('HH:mm:ss');\r\n                                        const endTime = moment(endTimeFlatpickr.selectedDates[0]).format('HH:mm:ss');\r\n\r\n                                        startDateTime = startDate + 'T' + startTime;\r\n                                        endDateTime = endDate + 'T' + endTime;\r\n                                    }\r\n\r\n                                    // Add new event to calendar\r\n                                    calendar.addEvent({\r\n                                        id: uid(),\r\n                                        title: eventName.value,\r\n                                        description: eventDescription.value,\r\n                                        location: eventLocation.value,\r\n                                        start: startDateTime,\r\n                                        end: endDateTime,\r\n                                        allDay: allDayEvent\r\n                                    });\r\n                                    calendar.render();\r\n\r\n                                    // Reset form for demo purposes only\r\n                                    form.reset();\r\n                                }\r\n                            });\r\n\r\n                            //form.submit(); // Submit form\r\n                        }, 2000);\r\n                    } else {\r\n                        // Show popup warning \r\n                        Swal.fire({\r\n                            text: \"Sorry, looks like there are some errors detected, please try again.\",\r\n                            icon: \"error\",\r\n                            buttonsStyling: false,\r\n                            confirmButtonText: \"Ok, got it!\",\r\n                            customClass: {\r\n                                confirmButton: \"btn btn-primary\"\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Handle edit event\r\n    const handleEditEvent = () => {\r\n        // Update modal title\r\n        modalTitle.innerText = \"Edit an Event\";\r\n\r\n        modal.show();\r\n\r\n        // Select datepicker wrapper elements\r\n        const datepickerWrappers = form.querySelectorAll('[data-calendar=\"datepicker\"]');\r\n\r\n        // Handle all day toggle\r\n        const allDayToggle = form.querySelector('#calendar_datepicker_allday');\r\n        allDayToggle.addEventListener('click', e => {\r\n            if (e.target.checked) {\r\n                datepickerWrappers.forEach(dw => {\r\n                    dw.classList.add('d-none');\r\n                });\r\n            } else {\r\n                endFlatpickr.setDate(data.startDate, true, 'Y-m-d');\r\n                datepickerWrappers.forEach(dw => {\r\n                    dw.classList.remove('d-none');\r\n                });\r\n            }\r\n        });\r\n\r\n        populateForm(data);\r\n\r\n        // Handle submit form\r\n        submitButton.addEventListener('click', function (e) {\r\n            // Prevent default button action\r\n            e.preventDefault();\r\n\r\n            // Validate form before submit\r\n            if (validator) {\r\n                validator.validate().then(function (status) {\r\n                    console.log('validated!');\r\n\r\n                    if (status == 'Valid') {\r\n                        // Show loading indication\r\n                        submitButton.setAttribute('data-indicator', 'on');\r\n\r\n                        // Disable submit button whilst loading\r\n                        submitButton.disabled = true;\r\n\r\n                        // Simulate form submission\r\n                        setTimeout(function () {\r\n                            // Simulate form submission\r\n                            submitButton.removeAttribute('data-indicator');\r\n\r\n                            // Show popup confirmation \r\n                            Swal.fire({\r\n                                text: \"New event added to calendar!\",\r\n                                icon: \"success\",\r\n                                buttonsStyling: false,\r\n                                confirmButtonText: \"Ok, got it!\",\r\n                                customClass: {\r\n                                    confirmButton: \"btn btn-primary\"\r\n                                }\r\n                            }).then(function (result) {\r\n                                if (result.isConfirmed) {\r\n                                    modal.hide();\r\n\r\n                                    // Enable submit button after loading\r\n                                    submitButton.disabled = false;\r\n\r\n                                    // Remove old event\r\n                                    calendar.getEventById(data.id).remove();\r\n\r\n                                    // Detect if is all day event\r\n                                    let allDayEvent = false;\r\n                                    if (allDayToggle.checked) { allDayEvent = true; }\r\n                                    if (startTimeFlatpickr.selectedDates.length === 0) { allDayEvent = true; }\r\n\r\n                                    // Merge date & time\r\n                                    var startDateTime = moment(startFlatpickr.selectedDates[0]).format();\r\n                                    var endDateTime = moment(endFlatpickr.selectedDates[endFlatpickr.selectedDates.length - 1]).format();\r\n                                    if (!allDayEvent) {\r\n                                        const startDate = moment(startFlatpickr.selectedDates[0]).format('YYYY-MM-DD');\r\n                                        const endDate = startDate;\r\n                                        const startTime = moment(startTimeFlatpickr.selectedDates[0]).format('HH:mm:ss');\r\n                                        const endTime = moment(endTimeFlatpickr.selectedDates[0]).format('HH:mm:ss');\r\n\r\n                                        startDateTime = startDate + 'T' + startTime;\r\n                                        endDateTime = endDate + 'T' + endTime;\r\n                                    }\r\n\r\n                                    // Add new event to calendar\r\n                                    calendar.addEvent({\r\n                                        id: uid(),\r\n                                        title: eventName.value,\r\n                                        description: eventDescription.value,\r\n                                        location: eventLocation.value,\r\n                                        start: startDateTime,\r\n                                        end: endDateTime,\r\n                                        allDay: allDayEvent\r\n                                    });\r\n                                    calendar.render();\r\n\r\n                                    // Reset form for demo purposes only\r\n                                    form.reset();\r\n                                }\r\n                            });\r\n\r\n                            //form.submit(); // Submit form\r\n                        }, 2000);\r\n                    } else {\r\n                        // Show popup warning \r\n                        Swal.fire({\r\n                            text: \"Sorry, looks like there are some errors detected, please try again.\",\r\n                            icon: \"error\",\r\n                            buttonsStyling: false,\r\n                            confirmButtonText: \"Ok, got it!\",\r\n                            customClass: {\r\n                                confirmButton: \"btn btn-primary\"\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    // Handle view event\r\n    const handleViewEvent = () => {\r\n        viewModal.show();\r\n\r\n        // Detect all day event\r\n        var eventNameMod;\r\n        var startDateMod;\r\n        var endDateMod;\r\n\r\n        // Generate labels\r\n        if (data.allDay) {\r\n            eventNameMod = 'All Day';\r\n            startDateMod = moment(data.startDate).format('Do MMM, YYYY');\r\n            endDateMod = moment(data.endDate).format('Do MMM, YYYY');\r\n        } else {\r\n            eventNameMod = '';\r\n            startDateMod = moment(data.startDate).format('Do MMM, YYYY - h:mm a');\r\n            endDateMod = moment(data.endDate).format('Do MMM, YYYY - h:mm a');\r\n        }\r\n\r\n        // Populate view data\r\n        viewEventName.innerText = data.eventName;\r\n        viewAllDay.innerText = eventNameMod;\r\n        viewEventDescription.innerText = data.eventDescription ? data.eventDescription : '--';\r\n        viewEventLocation.innerText = data.eventLocation ? data.eventLocation : '--';\r\n        viewStartDate.innerText = startDateMod;\r\n        viewEndDate.innerText = endDateMod;\r\n    }\r\n\r\n    // Handle delete event\r\n    const handleDeleteEvent = () => {\r\n        viewDeleteButton.addEventListener('click', e => {\r\n            e.preventDefault();\r\n\r\n            Swal.fire({\r\n                text: \"Are you sure you would like to delete this event?\",\r\n                icon: \"warning\",\r\n                showCancelButton: true,\r\n                buttonsStyling: false,\r\n                confirmButtonText: \"Yes, delete it!\",\r\n                cancelButtonText: \"No, return\",\r\n                customClass: {\r\n                    confirmButton: \"btn btn-primary\",\r\n                    cancelButton: \"btn btn-active-light\"\r\n                }\r\n            }).then(function (result) {\r\n                if (result.value) {\r\n                    calendar.getEventById(data.id).remove();\r\n\r\n                    viewModal.hide(); // Hide modal\t\t\t\t\r\n                } else if (result.dismiss === 'cancel') {\r\n                    Swal.fire({\r\n                        text: \"Your event was not deleted!.\",\r\n                        icon: \"error\",\r\n                        buttonsStyling: false,\r\n                        confirmButtonText: \"Ok, got it!\",\r\n                        customClass: {\r\n                            confirmButton: \"btn btn-primary\",\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // Handle edit button\r\n    const handleEditButton = () => {\r\n        viewEditButton.addEventListener('click', e => {\r\n            e.preventDefault();\r\n\r\n            viewModal.hide();\r\n            handleEditEvent();\r\n        });\r\n    }\r\n\r\n    // Handle cancel button\r\n    const handleCancelButton = () => {\r\n        // Edit event modal cancel button\r\n        cancelButton.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n\r\n            Swal.fire({\r\n                text: \"Are you sure you would like to cancel?\",\r\n                icon: \"warning\",\r\n                showCancelButton: true,\r\n                buttonsStyling: false,\r\n                confirmButtonText: \"Yes, cancel it!\",\r\n                cancelButtonText: \"No, return\",\r\n                customClass: {\r\n                    confirmButton: \"btn btn-primary\",\r\n                    cancelButton: \"btn btn-active-light\"\r\n                }\r\n            }).then(function (result) {\r\n                if (result.value) {\r\n                    form.reset(); // Reset form\t\r\n                    modal.hide(); // Hide modal\t\t\t\t\r\n                } else if (result.dismiss === 'cancel') {\r\n                    Swal.fire({\r\n                        text: \"Your form has not been cancelled!.\",\r\n                        icon: \"error\",\r\n                        buttonsStyling: false,\r\n                        confirmButtonText: \"Ok, got it!\",\r\n                        customClass: {\r\n                            confirmButton: \"btn btn-primary\",\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // Handle close button\r\n    const handleCloseButton = () => {\r\n        // Edit event modal close button\r\n        closeButton.addEventListener('click', function (e) {\r\n            e.preventDefault();\r\n\r\n            Swal.fire({\r\n                text: \"Are you sure you would like to cancel?\",\r\n                icon: \"warning\",\r\n                showCancelButton: true,\r\n                buttonsStyling: false,\r\n                confirmButtonText: \"Yes, cancel it!\",\r\n                cancelButtonText: \"No, return\",\r\n                customClass: {\r\n                    confirmButton: \"btn btn-primary\",\r\n                    cancelButton: \"btn btn-active-light\"\r\n                }\r\n            }).then(function (result) {\r\n                if (result.value) {\r\n                    form.reset(); // Reset form\t\r\n                    modal.hide(); // Hide modal\t\t\t\t\r\n                } else if (result.dismiss === 'cancel') {\r\n                    Swal.fire({\r\n                        text: \"Your form has not been cancelled!.\",\r\n                        icon: \"error\",\r\n                        buttonsStyling: false,\r\n                        confirmButtonText: \"Ok, got it!\",\r\n                        customClass: {\r\n                            confirmButton: \"btn btn-primary\",\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    // Handle view button\r\n    const handleViewButton = () => {\r\n        const viewButton = document.querySelector('#calendar_event_view_button');\r\n        viewButton.addEventListener('click', e => {\r\n            e.preventDefault();\r\n\r\n            hidePopovers();\r\n            handleViewEvent();\r\n        });\r\n    }\r\n\r\n    // Helper functions\r\n\r\n    // Reset form validator on modal close\r\n    const resetFormValidator = (element) => {\r\n        // Target modal hidden event --- For more info: https://getbootstrap.com/docs/5.0/components/modal/#events\r\n        element.addEventListener('hidden.bs.modal', e => {\r\n            if (validator) {\r\n                // Reset form validator. For more info: https://formvalidation.io/guide/api/reset-form\r\n                validator.resetForm(true);\r\n            }\r\n        });\r\n    }\r\n\r\n    // Populate form \r\n    const populateForm = () => {\r\n        eventName.value = data.eventName ? data.eventName : '';\r\n        eventDescription.value = data.eventDescription ? data.eventDescription : '';\r\n        eventLocation.value = data.eventLocation ? data.eventLocation : '';\r\n        startFlatpickr.setDate(data.startDate, true, 'Y-m-d');\r\n\r\n        // Handle null end dates\r\n        const endDate = data.endDate ? data.endDate : moment(data.startDate).format();\r\n        endFlatpickr.setDate(endDate, true, 'Y-m-d');\r\n\r\n        const allDayToggle = form.querySelector('#calendar_datepicker_allday');\r\n        const datepickerWrappers = form.querySelectorAll('[data-calendar=\"datepicker\"]');\r\n        if (data.allDay) {\r\n            allDayToggle.checked = true;\r\n            datepickerWrappers.forEach(dw => {\r\n                dw.classList.add('d-none');\r\n            });\r\n        } else {\r\n            startTimeFlatpickr.setDate(data.startDate, true, 'Y-m-d H:i');\r\n            endTimeFlatpickr.setDate(data.endDate, true, 'Y-m-d H:i');\r\n            endFlatpickr.setDate(data.startDate, true, 'Y-m-d');\r\n            allDayToggle.checked = false;\r\n            datepickerWrappers.forEach(dw => {\r\n                dw.classList.remove('d-none');\r\n            });\r\n        }\r\n    }\r\n\r\n    // Format FullCalendar reponses\r\n    const formatArgs = (res) => {\r\n        data.id = res.id;\r\n        data.eventName = res.title;\r\n        data.eventDescription = res.description;\r\n        data.eventLocation = res.location;\r\n        data.startDate = res.startStr;\r\n        data.endDate = res.endStr;\r\n        data.allDay = res.allDay;\r\n    }\r\n\r\n    // Generate unique IDs for events\r\n    const uid = () => {\r\n        return Date.now().toString() + Math.floor(Math.random() * 1000).toString();\r\n    }\r\n\r\n    return {\r\n        // Public Functions\r\n        init: function () {\r\n            // Define variables\r\n            // Add event modal\r\n            const element = document.getElementById('modal_add_event');\r\n            form = element.querySelector('#modal_add_event_form');\r\n            eventName = form.querySelector('[name=\"calendar_event_name\"]');\r\n            eventDescription = form.querySelector('[name=\"calendar_event_description\"]');\r\n            eventLocation = form.querySelector('[name=\"calendar_event_location\"]');\r\n            startDatepicker = form.querySelector('#calendar_datepicker_start_date');\r\n            endDatepicker = form.querySelector('#calendar_datepicker_end_date');\r\n            startTimepicker = form.querySelector('#calendar_datepicker_start_time');\r\n            endTimepicker = form.querySelector('#calendar_datepicker_end_time');\r\n            addButton = document.querySelector('[data-calendar=\"add\"]');\r\n            submitButton = form.querySelector('#modal_add_event_submit');\r\n            cancelButton = form.querySelector('#modal_add_event_cancel');\r\n            closeButton = element.querySelector('#modal_add_event_close');\r\n            modalTitle = form.querySelector('[data-calendar=\"title\"]');\r\n            modal = new bootstrap.Modal(element);\r\n\r\n            // View event modal\r\n            const viewElement = document.getElementById('modal_view_event');\r\n            viewModal = new bootstrap.Modal(viewElement);\r\n            viewEventName = viewElement.querySelector('[data-calendar=\"event_name\"]');\r\n            viewAllDay = viewElement.querySelector('[data-calendar=\"all_day\"]');\r\n            viewEventDescription = viewElement.querySelector('[data-calendar=\"event_description\"]');\r\n            viewEventLocation = viewElement.querySelector('[data-calendar=\"event_location\"]');\r\n            viewStartDate = viewElement.querySelector('[data-calendar=\"event_start_date\"]');\r\n            viewEndDate = viewElement.querySelector('[data-calendar=\"event_end_date\"]');\r\n            viewEditButton = viewElement.querySelector('#modal_view_event_edit');\r\n            viewDeleteButton = viewElement.querySelector('#modal_view_event_delete');\r\n\r\n            initCalendarApp();\r\n            initValidator();\r\n            initDatepickers();\r\n            handleEditButton();\r\n            handleAddButton();\r\n            handleDeleteEvent();\r\n            handleCancelButton();\r\n            handleCloseButton();\r\n            resetFormValidator(element);\r\n        }\r\n    };\r\n}();\r\n\r\n// При загрузке документа\r\nUtil.onDOMContentLoaded(function () {\r\n    AppCalendar.init();\r\n});\r\n"]}