"use strict";var AccountSettingsProfileDetails=function(){var t,e,a;return{init:function(){$("#birthday_picker").flatpickr({dateFormat:"d.m.Y"}),(t=document.getElementById("account_details_form"))&&(e=t.querySelector("#account_details_save"),a=FormValidation.formValidation(t,{fields:{lastname:{validators:{notEmpty:{message:"Фамилия обязательна"}}},firstname:{validators:{notEmpty:{message:"Имя обязательно"}}},username:{validators:{notEmpty:{message:"Логин обязателен"}}},sex:{validators:{notEmpty:{message:"Пол обязателен"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,submitButton:new FormValidation.plugins.SubmitButton,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),e.addEventListener("click",(function(n){n.preventDefault(),a.validate().then((function(a){if("Valid"==a){e.setAttribute("data-indicator","on"),e.disabled=!0;let a=new FormData;a.append("avatar",t.querySelector('[name="avatar"]').files[0]),a.append("lastname",t.querySelector('[name="lastname"]').value),a.append("firstname",t.querySelector('[name="firstname"]').value),a.append("middlename",t.querySelector('[name="middlename"]').value),a.append("username",t.querySelector('[name="username"]').value),a.append("bithday",t.querySelector('[name="bithday"]').value),a.append("sex",t.querySelector('[name="sex"]').value),axios.post("/settings/ajax/information",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.removeAttribute("data-indicator"),e.disabled=!1,t.data&&200==t.data.status?(console.debug(t),swal.fire({text:"Данные обновлены!",icon:"success",buttonsStyling:!1,confirmButtonText:"Хорошо!",customClass:{confirmButton:"btn fw-bold btn-light-primary"}})):(console.error(t.data.error,t.data.traces),swal.fire({text:t.data.error??"Неизвестная ошибка",icon:"error",buttonsStyling:!1,confirmButtonText:"Хорошо!",customClass:{confirmButton:"btn fw-bold btn-light-primary"}}))})).catch((function(t){console.error(t),e.removeAttribute("data-indicator"),e.disabled=!1,swal.fire({text:"Проверьте соединение с интернетом или обратитесь к администрации",icon:"error",buttonsStyling:!1,confirmButtonText:"Хорошо!",customClass:{confirmButton:"btn fw-bold btn-light-primary"}})}))}else swal.fire({text:"Пожалуйста, проверьте данные",icon:"error",buttonsStyling:!1,confirmButtonText:"Хорошо!",customClass:{confirmButton:"btn fw-bold btn-light-primary"}})}))})))}}}();Util.onDOMContentLoaded((function(){AccountSettingsProfileDetails.init()}));
//# sourceMappingURL=information.js.map
