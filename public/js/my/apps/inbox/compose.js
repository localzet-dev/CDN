"use strict";var AppInboxCompose=function(){const e=e=>{const a=e.querySelector('[data-inbox-form="cc"]'),t=e.querySelector('[data-inbox-form="cc_button"]'),n=e.querySelector('[data-inbox-form="cc_close"]'),o=e.querySelector('[data-inbox-form="bcc"]'),r=e.querySelector('[data-inbox-form="bcc_button"]'),l=e.querySelector('[data-inbox-form="bcc_close"]');t.addEventListener("click",(e=>{e.preventDefault(),a.classList.remove("d-none"),a.classList.add("d-flex")})),n.addEventListener("click",(e=>{e.preventDefault(),a.classList.add("d-none"),a.classList.remove("d-flex")})),r.addEventListener("click",(e=>{e.preventDefault(),o.classList.remove("d-none"),o.classList.add("d-flex")})),l.addEventListener("click",(e=>{e.preventDefault(),o.classList.add("d-none"),o.classList.remove("d-flex")}))},a=e=>{const a=e.querySelector('[data-inbox-form="send"]');a.addEventListener("click",(function(){a.setAttribute("data-indicator","on"),setTimeout((function(){a.removeAttribute("data-indicator")}),3e3)}))},t=e=>{var a,t=new Tagify(e,{tagTextProp:"name",enforceWhitelist:!0,skipInvalid:!0,dropdown:{closeOnSelect:!1,enabled:0,classname:"users-list",searchKeys:["name","email"]},templates:{tag:function(e){return`\n                <tag title="${e.title||e.email}"\n                        contenteditable='false'\n                        spellcheck='false'\n                        tabIndex="-1"\n                        class="${this.settings.classNames.tag} ${e.class?e.class:""}"\n                        ${this.getAttributes(e)}>\n                    <x title='' class='tagify__tag__removeBtn' role='button' aria-label='remove tag'></x>\n                    <div class="d-flex align-items-center">\n                        <div class='tagify__tag__avatar-wrap ps-0'>\n                            <img onerror="this.style.visibility='hidden'" class="rounded-circle w-25px me-2" src="${hostUrl}media/${e.avatar}">\n                        </div>\n                        <span class='tagify__tag-text'>${e.name}</span>\n                    </div>\n                </tag>\n            `},dropdownItem:function(e){return`\n                <div ${this.getAttributes(e)}\n                    class='tagify__dropdown__item d-flex align-items-center ${e.class?e.class:""}'\n                    tabindex="0"\n                    role="option">\n\n                    ${e.avatar?`\n                            <div class='tagify__dropdown__item__avatar-wrap me-2'>\n                                <img onerror="this.style.visibility='hidden'"  class="rounded-circle w-50px me-2" src="${hostUrl}media/${e.avatar}">\n                            </div>`:""}\n\n                    <div class="d-flex flex-column">\n                        <strong>${e.name}</strong>\n                        <span>${e.email}</span>\n                    </div>\n                </div>\n            `}},whitelist:[{value:1,name:"Emma Smith",avatar:"avatars/300-6.jpg",email:"e.smith@kpmg.com.au"},{value:2,name:"Max Smith",avatar:"avatars/300-1.jpg",email:"max@kt.com"},{value:3,name:"Sean Bean",avatar:"avatars/300-5.jpg",email:"sean@dellito.com"},{value:4,name:"Brian Cox",avatar:"avatars/300-25.jpg",email:"brian@exchange.com"},{value:5,name:"Francis Mitcham",avatar:"avatars/300-9.jpg",email:"f.mitcham@kpmg.com.au"},{value:6,name:"Dan Wilson",avatar:"avatars/300-23.jpg",email:"dam@consilting.com"},{value:7,name:"Ana Crown",avatar:"avatars/300-12.jpg",email:"ana.cf@limtel.com"},{value:8,name:"John Miller",avatar:"avatars/300-13.jpg",email:"miller@mapple.com"}]});t.on("dropdown:show dropdown:updated",(function(e){var n=e.detail.tagify.DOM.dropdown.content;t.suggestedListItems.length>1&&(a=t.parseTemplate("dropdownItem",[{class:"addAll",name:"Add all",email:t.settings.whitelist.reduce((function(e,a){return t.isTagDuplicate(a.value)?e:e+1}),0)+" Members"}]),n.insertBefore(a,n.firstChild))})),t.on("dropdown:select",(function(e){e.detail.elm==a&&t.dropdown.selectAll.call(t)}))},n=e=>{new Quill("#inbox_form_editor",{modules:{toolbar:[[{header:[1,2,!1]}],["bold","italic","underline"],["image","code-block"]]},placeholder:"Type your text here...",theme:"snow"});const a=e.querySelector(".ql-toolbar");if(a){const e=["px-5","border-top-0","border-start-0","border-end-0"];a.classList.add(...e)}},o=e=>{const a='[data-inbox-form="dropzone"]',t=e.querySelector(a),n=e.querySelector('[data-inbox-form="dropzone_upload"]');var o=t.querySelector(".dropzone-item");o.id="";var r=o.parentNode.innerHTML;o.parentNode.removeChild(o);var l=new Dropzone(a,{url:"https://preview.keenthemes.com/api/dropzone/void.php",parallelUploads:20,maxFilesize:1,previewTemplate:r,previewsContainer:a+" .dropzone-items",clickable:n});l.on("addedfile",(function(e){t.querySelectorAll(".dropzone-item").forEach((e=>{e.style.display=""}))})),l.on("totaluploadprogress",(function(e){t.querySelectorAll(".progress-bar").forEach((a=>{a.style.width=e+"%"}))})),l.on("sending",(function(e){t.querySelectorAll(".progress-bar").forEach((e=>{e.style.opacity="1"}))})),l.on("complete",(function(e){const a=t.querySelectorAll(".dz-complete");setTimeout((function(){a.forEach((e=>{e.querySelector(".progress-bar").style.opacity="0",e.querySelector(".progress").style.opacity="0"}))}),300)}))};return{init:function(){(()=>{const r=document.querySelector("#inbox_compose_form"),l=r.querySelectorAll('[data-inbox-form="tagify"]');e(r),a(r),l.forEach((e=>{t(e)})),n(r),o(r)})()}}}();Util.onDOMContentLoaded((function(){AppInboxCompose.init()}));
//# sourceMappingURL=compose.js.map
