"use strict";var Register=function(){var e,r,a,t,o,n;return{init:function(){e=document.querySelector("#register_form"),r=document.querySelector("#register_submit"),a=document.querySelector("#error-alert"),t=document.querySelector("#error-head"),o=document.querySelector("#error-body"),n=FormValidation.formValidation(e,{fields:{login:{validators:{notEmpty:{message:"Логин обязателен"}}},email:{validators:{regexp:{regexp:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,message:"Это не адрес электронной почты"},notEmpty:{message:"Электронная почта обязательна"}}},password:{validators:{notEmpty:{message:"Пароль обязателен"}}}},plugins:{trigger:new FormValidation.plugins.Trigger,bootstrap:new FormValidation.plugins.Bootstrap5({rowSelector:".fv-row",eleInvalidClass:"",eleValidClass:""})}}),r.addEventListener("click",(function(i){i.preventDefault(),n.validate().then((function(n){"Valid"===n?(r.setAttribute("data-indicator","on"),r.disabled=!0,axios.post("/register",{firstname:e.querySelector('[name="firstname"]').value,login:e.querySelector('[name="login"]').value,lastname:e.querySelector('[name="lastname"]').value,email:e.querySelector('[name="email"]').value,password:e.querySelector('[name="password"]').value}).then((function(r){r.data&&200==r.data.status?(e.querySelector('[name="firstname"]').value="",e.querySelector('[name="lastname"]').value="",e.querySelector('[name="login"]').value="",e.querySelector('[name="email"]').value="",e.querySelector('[name="password"]').value="",location.href="/"):(console.error(r.data.error,r.data.traces),r.data.error_head&&(t.innerHTML=r.data.error_head),r.data.error&&(o.innerHTML=r.data.error),a.classList.remove("d-none"))})).catch((function(e){console.error(response),t.innerHTML="Ошибка связи с сервером",o.innerHTML="Проверьте соединение с интернетом или обратитесь к администрации",a.classList.remove("d-none")})),r.removeAttribute("data-indicator"),r.disabled=!1):(t.innerHTML="Ошибка запроса",o.innerHTML="Проверьте введённые данные",a.classList.remove("d-none"))}))}))}}}();Util.onDOMContentLoaded((function(){Register.init()}));
//# sourceMappingURL=register.js.map
